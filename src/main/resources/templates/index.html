<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>layui</title>
  <meta name="renderer" content="webkit" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="stylesheet" type="text/css" href="../static/css/reset.css"/>
  <link rel="stylesheet" href="../static/layui/css/layui.css"  media="all"/>
  <link rel="stylesheet" type="text/css" href="../static/css/admin.css" media="all"/>
  <link rel="stylesheet" type="text/css" href="../static/css/index.css"/>
</head>
<body>
	<!--头部-->
	<div class="layui-header">
		<!--左边导航-->
		<ul class="layui-nav layui-layout-left" id="lay_animate1">
			<li class="layui-nav-item layadmin-flexible">
				<a href="javascript:;" layadmin-event="flexible" title="侧边伸缩">
					<i class="layui-icon layui-icon-shrink-right"></i>
				</a>
			</li>
			<li class="layui-nav-item" onclick="window.location.reload()">
				<a href="javascript:;" layadmin-event="refresh" title="刷新">
					<i class="layui-icon layui-icon-refresh-3"></i>
				</a>
			</li>
			<span class="layui-nav-bar" style="left: 0px; top: 0px; width: 0px; opacity: 0;"></span>
		</ul>
		<!--右边导航-->
		<div class="layui-nav layui-layout-right" lay-filter="layadmin-layout-right">
			<ul class="layu-navlist" id="lay_animate2">
				<li class="layui-nav-item" >
					<a lay-href="message/index.html" layadmin-event="message" lay-text="消息中心">
						<i class="layui-icon layui-icon-notice"></i>
					</a>
				</li>
				<li class="layui-nav-item" id="_user" >
            <a href="javascript:;">
              <cite>admin</cite>
              <span class="layui-nav-more" id="_user-icon"></span>
            	<!--<span class="layui-nav-more"></span>-->
            </a>
            <dl class="layui-nav-child layui-anim layui-anim-upbit" id="layui-na">
              <dd><a lay-href="set/user/info.html">基本资料</a></dd>
              <dd><a lay-href="set/user/password.html">修改密码</a></dd>
              <hr/>
              <dd layadmin-event="logout" style="text-align: center;"><a>退出</a></dd>
            </dl>
       	</li>
				<span class="layui-nav-bar" style="left: 0px; top: 0px; width: 0px; opacity: 0;"></span>
			</ul>
		</div>
	</div>
	<!--侧边导航-->
	<div class="layui-side layui-side-menu" id="lay_lis">
		<div class="layui-side-scroll">
			<div class="layui-logo" lay-href="home/index.html">
				<span>Admin</span>
			</div>
			<ul class="layui-nav layui-nav-tree" id="lay_animate3">
				<li data-neme="home" class="layui-nav-item">
					<a href="javascript:;" lay-tips="主页" lay-direction="2">
            <i class="layui-icon layui-icon-home"></i>
            <cite>主页</cite>
            <span class="layui-nav-more"></span>
					</a>
					<dl class="layui-nav-child">
		        <dd data-name="console" class="layui-this">
		          <a lay-href="home/index.html">控制台</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian1.html">主页一</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian2.html">主页二</a>
		        </dd>
		      </dl>
				</li>
				<li data-neme="home" class="layui-nav-item">
					<a href="javascript:;" lay-tips="主页" lay-direction="2">
            <i class="layui-icon layui-icon-home"></i>
            <cite>主页</cite>
            <span class="layui-nav-more"></span>
					</a>
					<dl class="layui-nav-child">
		        <dd data-name="console" class="layui-this">
		          <a lay-href="home/index1.html">控制台</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian3.html">主页一</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian4.html">主页二</a>
		        </dd>
		      </dl>
				</li>
				<li data-neme="home" class="layui-nav-item">
					<a href="javascript:;" lay-tips="主页" lay-direction="2">
            <i class="layui-icon layui-icon-home"></i>
            <cite>主页</cite>
            <span class="layui-nav-more"></span>
					</a>
					<dl class="layui-nav-child">
		        <dd data-name="console" class="layui-this">
		          <a lay-href="home/index2.html">控制台</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian5.html">主页一</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian6.html">主页二</a>
		        </dd>
		      </dl>
				</li>
				<li data-neme="home" class="layui-nav-item">
					<a href="javascript:;" lay-tips="主页" lay-direction="2">
            <i class="layui-icon layui-icon-home"></i>
            <cite>主页</cite>
            <span class="layui-nav-more"></span>
					</a>
					<dl class="layui-nav-child">
		        <dd data-name="console" class="layui-this">
		          <a lay-href="home/index3.html">控制台</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian7.html">主页一</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian8.html">主页二</a>
		        </dd>
		      </dl>
				</li>
				<li data-neme="home" class="layui-nav-item">
					<a href="javascript:;" lay-tips="主页" lay-direction="2">
            <i class="layui-icon layui-icon-home"></i>
            <cite>主页</cite>
            <span class="layui-nav-more"></span>
					</a>
					<dl class="layui-nav-child">
		        <dd data-name="console" class="layui-this">
		          <a lay-href="home/index4.html">控制台</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian9.html">主页一</a>
		        </dd>
		        <dd data-name="console" class="">
		          <a lay-href="home/yemian0.html">主页二</a>
		        </dd>
		      </dl>
				</li>
				<span class="layui-nav-bar" style="top: 28px; height: 0px; opacity: 0;"></span>
			</ul>
		</div>
	</div>
	<!--页面标签-->
	<div class="layadmin-pagetabs" id="LAY_app_tabs">
    <div class="layui-icon layadmin-tabs-control layui-icon-prev" id="leftPage" layadmin-event="leftPage"></div>
    <div class="layui-icon layadmin-tabs-control layui-icon-next" id="rightPage" layadmin-event="rightPage"></div>
    <div class="layui-icon layadmin-tabs-control layui-icon-down">
      <ul class="layui-nav layadmin-tabs-select" lay-filter="layadmin-pagetabs-nav">
        <li class="layui-nav-item" id="closed" >
          <a href="javascript:;"><span class="layui-nav-more"></span></a>
          <dl class="layui-nav-child layui-anim-fadein">
            <dd layadmin-event="closeThisTabs" id="closed_index"><a href="javascript:;">关闭当前标签页</a></dd>
            <dd layadmin-event="closeOtherTabs" id="closed_others"><a href="javascript:;">关闭其它标签页</a></dd>
            <dd layadmin-event="closeAllTabs" id="closed_all"><a href="javascript:;">关闭全部标签页</a></dd>
          </dl>
        </li>
      <span class="layui-nav-bar"></span></ul>
    </div>
    <div class="layui-tab" lay-unauto="" lay-allowclose="true" lay-filter="layadmin-layout-tabs">
      <ul class="layui-tab-title" id="LAY_app_tabsheader" style="left: 0px;">
        <li class="lay_app_li layui-this" lay-id="home/index.html" lay-attr="home/index.html" ><i class="layui-icon layui-icon-home"></i><i class="layui-icon layui-unselect layui-tab-close">ဆ</i></li>
			</ul>
    </div>
  </div>
  <!--主题内容-->
  <div class="layui-body" id="LAY_app_body">
    <div class="layadmin-tabsbody-item layui-show">
      <iframe src="home/index.html" frameborder="0" class="layadmin-iframe"></iframe>
    </div>
  </div>
  <!--遮罩效果-->
  <div class="layadmin-body-shade layui_active" layadmin-event="shade"></div>
<script type="text/javascript" src="../static/js/jquery-3.3.1.min.js"></script>
<script src="../static/layui/layui.js" charset="utf-8"></script>
<script>
    //<![CDATA[
	//菜单隐藏显示
	function size_changed_zero(){
		$('.layui-side-menu').width(0);
		$('.layui-header .layui-layout-left,#LAY_app_tabs,.layui-body,.layadmin-body-shade').css({'left':'0'})
		$('.layui-side-menu .layui-side-scroll').hide();
	}
	function size_changed_before(){
		$('.layui-side-menu,.layui-logo').width("175px");
		$('.layui-header .layui-layout-left,#LAY_app_tabs,.layui-body,.layadmin-body-shade').css({'left':'175px'})
		$('.layui-side-menu .layui-side-scroll').show();
	}
	$(window).resize(function(){
		if($(window).width()<=992){
			size_changed_zero();
		}else{
			size_changed_before();
			$('.layadmin-body-shade').addClass('layui_active');
			$('#LAY_app_tabs,#lay_animate1,.layui-layout-right').css('right','0');
		}
	})
	//荧幕开关
	function shade_on(){
		if($('.layadmin-body-shade').hasClass('layui_active')){
			$('.layadmin-body-shade').removeClass('layui_active');
		}else{
			$('.layadmin-body-shade').addClass('layui_active');
		}
	}
	$('.layadmin-body-shade').click(function(){
		if($('.layui-side-menu').width()){
				size_changed_zero();
				$('#LAY_app_tabs,#lay_animate1,.layui-layout-right').css('right','0');
			}else{
				size_changed_before();
				$('#LAY_app_tabs,#lay_animate1,.layui-layout-right').css('right','-175px');
			}
			shade_on();
	})
	$('.layadmin-flexible').click(function(){
		if($(window).width()<=992){
			if($('.layui-side-menu').width()){
				size_changed_zero();
				$('#LAY_app_tabs,#lay_animate1,.layui-layout-right').css('right','0');
			}else{
				size_changed_before();
				$('#LAY_app_tabs,#lay_animate1,.layui-layout-right').css('right','-175px');
			}
			shade_on();
		}else{
			if($('.layui-side-menu').width()){
				size_changed_zero();
			}else{
				size_changed_before();
			}
		}
	})
	$('#lay_animate3 .layui-nav-child dd').click(function(){
		if($(window).width()<=992){
			size_changed_zero();
			shade_on();
		}else{
			size_changed_before();
		}
	})
	//菜单点击事项
	$('#_user').click(function(){
		if($('#layui-na').hasClass('layui-show')){
			$('#layui-na').removeClass('layui-show')
		}else{
			$('#layui-na').addClass('layui-show')
		}
		if($('#_user-icon').hasClass('layui-nav-mored')){
			$('#_user-icon').removeClass('layui-nav-mored')
		}else{
			$('#_user-icon').addClass('layui-nav-mored')
		}
	})
	//顶部移动条
	$('#lay_animate1 .layui-nav-item').mouseover(function(){
		var i=$('#lay_animate1 .layui-nav-item').index(this);
		$('#lay_animate1 .layui-nav-bar').css({
			'width':$('#lay_animate1 .layui-nav-item').eq(i).width(),
			'opacity':1,
			'top':0,
			'left':$('#lay_animate1 .layui-nav-item').eq(i).width()*i+20,
			'height':'2px',
			'background-color':'#777'
		})
	});
	$('#lay_animate1 .layui-nav-item').mouseout(function(){
		$('#lay_animate1 .layui-nav-bar').css({
			'width':0,
			'opacity':0,
		})
	});
	//右侧顶部导航
	$('#lay_animate2 .layui-nav-item').mouseover(function(){
		var i=$('#lay_animate2 .layui-nav-item').index(this);
		$('#lay_animate2 .layui-nav-bar').css({
			'width':$('#lay_animate2 .layui-nav-item').eq(i).width(),
			'opacity':1,
			'top':0,
			'left':$('#lay_animate2 .layui-nav-item').eq(i).offset().left-$('#lay_animate2').offset().left+20,
			'height':'2px',
			'background-color':'#777'
		})
	});
	$('#lay_animate2 .layui-nav-item').mouseout(function(){
		$('#lay_animate2 .layui-nav-bar').css({
			'width':0,
			'opacity':0,
		})
	});
	$('#lay_item').click(function(){
		$('#lay_menu').addClass('layui-show')
	})
	//侧边绿条位置
	$('#lay_animate3 .layui-nav-item').mouseover(function(){
		var i=$('#lay_animate3 .layui-nav-item').index(this);
		$('#lay_animate3 .layui-nav-bar').css({
			'height':'56px',
			'opacity':1,
			'top':$('#lay_animate3 .layui-nav-item').eq(i).position().top+$("#lay_animate3").scrollTop(),
			'left':0,
			'width':'4px',
		})
	});
	$('#lay_animate3 .layui-nav-item').mouseout(function(){
		var i=$('#lay_animate3 .layui-nav-item').index(this);
		$('#lay_animate3 .layui-nav-bar').css({
			'height':0,
			'opacity':0,
		})
	});
	$('#lay_animate3 .layui-nav-item a').click(function(){
		var i=$('.layui-nav-item a').index(this);
			if($('.layui-nav-item a').eq(i).parent().hasClass('layui-nav-itemed')){
				$('.layui-nav-item a').eq(i).parent().removeClass('layui-nav-itemed')
			}else{
				$('.layui-nav-item a').eq(i).parent().addClass('layui-nav-itemed')
			}
	})
	//二级导航栏绿条
	$('.layui-nav-child dd').click(function (){
		var i=$('.layui-nav-child dd').index(this);
		$('.layui-nav-child dd').eq(i).addClass('layui-this').siblings().removeClass('layui-this');
	})
	
	//点击创建新窗口
	var arr=new Array();
	var maxWidth=$('.lay_app_li').eq(0).innerWidth();//用来保存li的总宽度
	$('a[lay-href]').bind('click',function(){
		var i=$('a[lay-href]').index(this);
		//把所有点击的路径放在一个空数组中
		if(arr.length==0){
			arr.push($('.layadmin-tabsbody-item').eq(0).find('iframe').attr("src"));
		}else{
			for(var j=0;j<arr.length;j++){
				if(!(arr.indexOf($('.layadmin-tabsbody-item').eq(j).find('iframe').attr("src"))+1)){
					arr.push($('.layadmin-tabsbody-item').eq(j).find('iframe').attr("src"));
				}
			}
		}
		//遍历所有的子窗口有没有这个路径窗口，没有就创建
		for(var j=0;j<arr.length;j++){
			if(!((arr.indexOf($('a[lay-href]').eq(i).attr('lay-href')))+1)){
				$('#LAY_app_body').append('<div class="layadmin-tabsbody-item layui-show"><iframe src="'+$('a[lay-href]').eq(i).attr('lay-href')+'" frameborder="0" class="layadmin-iframe"></iframe></div>')
				$('#LAY_app_tabsheader').append('<li class="lay_app_li" lay-id="'+$('a[lay-href]').eq(i).attr('lay-href')+'" lay-attr="'+$('a[lay-href]').eq(i).attr('lay-href')+'" class="layui-this"><span>'+$('a[lay-href]').eq(i).html()+'</span><i class="layui-icon layui-unselect layui-tab-close">ဆ</i></li>')
				arr.push($('a[lay-href]').eq(i).attr('lay-href'));
				maxWidth=maxWidth+$('.lay_app_li').last().innerWidth();
			}
		}
		//遍历所有的窗口，添加选中active样式
		for(var k=0;k<arr.length;k++){
			if($('.layadmin-tabsbody-item').eq(k).find('iframe').attr("src")==$('a[lay-href]').eq(i).attr('lay-href')){
				$('.layadmin-tabsbody-item').eq(k).addClass('layui-show').siblings().removeClass('layui-show');
			}
			if($('.layui-tab-title li').eq(k).attr('lay-id')==$('a[lay-href]').eq(i).attr('lay-href')){
				$('.layui-tab-title li').eq(k).addClass('layui-this').siblings().removeClass('layui-this');
			}
		}
		//窗口可视化移动函数
		view_scroll();
	});
	$('#LAY_app_tabsheader').on("click",".lay_app_li",function(){
			var i=$('.lay_app_li').index(this);
			$('.lay_app_li').eq(i).addClass('layui-this').siblings().removeClass('layui-this');
				for(var k=0;k<$('.lay_app_li').length;k++){
					if($('.layadmin-tabsbody-item').eq(k).find('iframe').attr("src")==$('.lay_app_li').eq(i).attr('lay-id')){
						$('.layadmin-tabsbody-item').eq(k).addClass('layui-show').siblings().removeClass('layui-show');
					}
					if($('.lay_app_li').eq(i).attr('lay-id')==$('#lay_animate3 a[lay-href]').eq(k).attr('lay-href')){
						$('#lay_animate3 a[lay-href]').eq(k).parent().addClass('layui-this').siblings().removeClass('layui-this');
					}
				}
	});
	//页面关闭
	$('#LAY_app_tabsheader').on("click",'.lay_app_li .layui-tab-close',function(){
		var i=$('#LAY_app_tabsheader .layui-tab-close').index(this);
		arr.splice(i,1);
		$('.lay_app_li').eq(i).remove();
		$('#LAY_app_body .layadmin-tabsbody-item').eq(i).remove();
		
	})
	//获取显示窗口的下标
	var tab_index;
	function closed_tab(){
		for(var i=0;i<$('.lay_app_li').length;i++){
			if($('.lay_app_li').eq(i).hasClass('layui-this')){
				tab_index=i;
			}
		}
	}
	//右边悬浮窗口关闭
	$('#closed').click(function(){
		if($('#closed dl').hasClass('layui-show')){
			$('#closed dl').removeClass('layui-show');
		}else{
			$('#closed dl').addClass('layui-show');
		}
		closed_tab();
	})
	//关闭功能
	
	//关闭当前
	$('#closed_index').on("click",function(){
		closed_tab();
		if(tab_index){//保证首页不会被删除
			arr.splice(tab_index,1);
			if(tab_index+1>=$('.lay_app_li').length){
				$('.lay_app_li').eq(tab_index-1).addClass('layui-this').siblings().removeClass('layui-this');
				$('#LAY_app_body .layadmin-tabsbody-item').eq(tab_index-1).addClass('layui-show').siblings().removeClass('layui-show');
			}else{
				$('.lay_app_li').eq(tab_index+1).addClass('layui-this').siblings().removeClass('layui-this');
				$('#LAY_app_body .layadmin-tabsbody-item').eq(tab_index+1).addClass('layui-show').siblings().removeClass('layui-show');
			}
			$('.lay_app_li').eq(tab_index).remove();
			$('#LAY_app_body .layadmin-tabsbody-item').eq(tab_index).remove();
		}
	})
	//关闭其他
	$('#closed_others').on("click",function(){
		closed_tab();
		var maxlength=$('.lay_app_li').length;
		for(var i=1;i<$('.lay_app_li').length;i++){
			if($('.lay_app_li').eq(i).hasClass('layui-this')){
				continue;
			}else{
				arr.splice(i,1);
				$('.lay_app_li').eq(i).remove();
				$('#LAY_app_body .layadmin-tabsbody-item').eq(i).remove();
				i--;
			}
		}
	})
	//关闭全部
	$('#closed_all').on("click",function(){
		arr.splice(1,$('.lay_app_li').length-1);
		$('.lay_app_li').eq(0).siblings().remove();
		$('#LAY_app_body .layadmin-tabsbody-item').eq(0).siblings().remove();
		$('.lay_app_li').eq(0).addClass('layui-this');
		$('#LAY_app_body .layadmin-tabsbody-item').eq(0).addClass("layui-show");
	})
	//窗口左滑动
	//窗口可视区域滑动
	//判断窗口li的长度是否超过ul可视窗口，超过就移动
		//父级ul的left值
	var left_ul=parseInt($('#LAY_app_tabsheader').css("left"));
	function view_scroll(){
		closed_tab();
		//li的总宽度
		var width_lis=0;
		for(var i=0;i<$('#LAY_app_tabsheader .lay_app_li').length;i++){
			width_lis=width_lis+$('#LAY_app_tabsheader .lay_app_li').eq(i).innerWidth();
		}
		//li相对父级右偏移量
		var left_tab=$('#LAY_app_tabs .lay_app_li').eq(tab_index).position().left+$('#LAY_app_tabs .lay_app_li').eq(tab_index).innerWidth();
		var viewWidth=$('#LAY_app_tabsheader').innerWidth();
		if(left_tab>viewWidth){
			console.log(1);
		}
		if(left_tab>=viewWidth){
			$('#LAY_app_tabsheader').css("left",left_ul+viewWidth-left_tab);
			console.log("左移")
			viewWidth+=viewWidth;
		}
		console.log(width_lis);
		console.log(viewWidth);
		
	}
	var viewWidth=$('#LAY_app_tabsheader').innerWidth();
	$('#leftPage').on("click",function(){
		if(left_ul>=0){
			$('#LAY_app_tabsheader').css('left',0)
		}else{
			$('#LAY_app_tabsheader').css('left',left_ul-$('#LAY_app_tabs').width())
		}
	})
	
	$('#rightPage').on("click",function(){
		if(-left_ul>=viewWidth-$('#LAY_app_tabsheader').width()){
			$('#LAY_app_tabsheader').css('left',-(viewWidth-$('#LAY_app_tabsheader').width()))
		}else{
			$('#LAY_app_tabsheader').css('left',-$('#LAY_app_tabs').width())
		}
	})
    //]]>
</script>

</body>
</html>