<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link rel="stylesheet" href="../../static/layui/css/layui.css"></link>
    <link rel="stylesheet" type="text/css" href="../../static/css/reset.css"/>
    <style type="text/css">
    	.header-title{
    		text-align: center;
    		line-height: 50px;
    		font-size: 20px;
    		font-weight: 800;
    	}
    	form{
    		padding: 10px;
    	}
       .layui-form-label{
       	width: 126px;
       }
       .layui-input-block{
       	margin-left: 156px;
		margin-right: 20px;
       }
       .layui-input{
       	margin-bottom: 10px;
       }
       .layui-textarea{
       	resize: none;
       }
       .layui-form-select .layui-input{
       	padding-right: 0px;
       }
       #demo1{
       	width: 90px;
       	height: 90px;
       }
       .layui-upload{
       	margin: 0 20px;
       }
    </style>
</head>
<body>
   <!-- |
    <button>提交审批</button>
    <button>撤销审批</button>
    <button>审批</button>
    <button>流程图</button>
    |
    <button>首张</button>
    <button>上张</button>
    <button>下账</button>
    <button>未长</button>
    <button>定位</button>
    |
    <button>导入</button>
    <button>协同按钮</button>-->
<form class="layui-form" action="javascript:;" method="post">
    <div class="box">
        <h3 class="header-title" style="text-align: center;">
           	 基本信息
        </h3>
		
		<form action="javascript:;">
			<div class="layui-inline">
		      <label class="layui-form-label">日期</label>
		      <div class="layui-input-inline">
		        <input type="text" class="layui-input" id="date" placeholder="yyyy-MM-dd">
		      </div>
		    </div>
			<div class="layui-inline">
			  <label class="layui-form-label">金额大写</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">开户银行及账号</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">发票号码</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">登记编号</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
		      <label class="layui-form-label">发票类型</label>
		      <div class="layui-input-inline">
		        <select lay-filter="type">
		          <option value="">请选择</option>
		          <option value="1">layer</option>
		          <option value="2">form</option>
		          <option value="3">layim</option>
		        </select>
		      </div>
		    </div>
			<div class="layui-inline">
			  <label class="layui-form-label">收款单位</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">填报人</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">开票类型</label>
			  <div class="layui-input-inline">
		        <select>
		          <option value="">请选择</option>
		          <option value="1">layer</option>
		          <option value="2">form</option>
		          <option value="3">layim</option>
		        </select>
		      </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">项目名称</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">付款单位</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">发票金额</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">纳税人识别号</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-inline">
			  <label class="layui-form-label">组织机构代码整证号</label>
			  <div class="layui-input-inline">
				<input type="tel" name="phone" autocomplete="off" class="layui-input">
			  </div>
			</div>
			<div class="layui-form-item layui-form-text">
			  <label class="layui-form-label">备注</label>
			  <div class="layui-input-block">
			    <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
			  </div>
			</div>
			<div class="layui-upload">
			  <button type="button" class="layui-btn" id="test1">上传图片</button>
			  <div class="layui-upload-list">
			    <img class="layui-upload-img" id="demo1">
			    <p id="demoText"></p>
			  </div>
			</div>
		    <button class="layui-btn">保存</button>
		    <button class="layui-btn">删除</button>
		    <button class="layui-btn">打印</button>
			<div class="layui-upload-list">
			    <table class="layui-table">
			      <thead>
			        <tr>
			        	<th>文件名</th>
			        	<th>大小</th>
			        	<th>状态</th>
			        	<th>操作</th>
			      	</tr>
			      </thead>
			      <tbody id="demoList"></tbody>
			    </table>
  			</div>
		</form>
        
    </div>
</form>
</body>
<script src="../../static/js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../static/layui/layui.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
//  $(function () {
//      $.post("/invType/selectAll",
//          function (data) {
//              //alert("Data: " + data + "\nStatus: " + status);
//              $.each(data, function (index) {
//                  //循环获取数据
//                  //var id = data[index].typeId;
//                  var invType = data[index].invType;
//                  var option = "<option value=" + invType + ">" + invType + "</option>";
//                  $("#invType").append(option);
//              });
//          }, "json");
//
//      $.post("/invApplyfortype/selectAll",
//          function (data) {
//              //alert("Data: " + data + "\nStatus: " + status);
//              $.each(data, function (index, item) {
//                  //循环获取数据
//                  //var id = data[index].invApplyfortypeid;
//                  var invApplyfortype = data[index].invApplyfortype;
//                  var option = "<option value=" + invApplyfortype + ">" + invApplyfortype + "</option>";
//                  $("#invApplyfortype").append(option);
//              });
//          }, "json");
//      $.post("/project/getproject",
//          function (data) {
//              //alert("Data: " + data + "\nStatus: " + status);
//              var datas = data.data;
//              $.each(datas, function (index, item) {
//                  //循环获取数据
//                  //var id = data[index].invApplyfortypeid;
//                  var projectName = datas[index].projectName;
//                  var option = "<option value=" + projectName + ">" + projectName + "</option>";
//                  $("#itemName").append(option);
//              });
//          }, "json");
//  })
    
    layui.use(['form','laydate','upload'], function () {
        var laydate = layui.laydate,upload=layui.upload,
        	layer = layui.layer,form=layui.form;
        laydate.render({
        	elem: '#date'
        })
        
        //普通图片上传
		var uploadInst = upload.render({
		    elem: '#test1',
		    url: '/upload/',
		    before: function(obj){
		      //预读本地文件示例，不支持ie8
		      obj.preview(function(index, file, result){
		        $('#demo1').attr('src', result); //图片链接（base64）
		      });
		    },
		    done: function(res){
		      //如果上传失败
		      if(res.code > 0){
		        return layer.msg('上传失败');
		      }
		      //上传成功
		    },
		    error: function(){
		      //演示失败状态，并实现重传
		      var demoText = $('#demoText');
		      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
		      demoText.find('.demo-reload').on('click', function(){
		        uploadInst.upload();
		      });
		    }
		});
		
		//多文件列表示例
	  	var demoListView = $('#demoList'),
	  	uploadListIns = upload.render({
	    elem: '#testList',
	    url: '/upload/',
	    accept: 'file',
	    multiple: true,
	    auto: false,
	    bindAction: '#testListAction',
	    choose: function(obj){   
		    var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
		      //读取本地文件
		    obj.preview(function(index, file, result){
		        var tr = $(['<tr id="upload-'+ index +'">',
		          '<td>'+ file.name +'</td>',
		          '<td>'+ (file.size/1014).toFixed(1) +'kb</td>',
		          '<td>等待上传</td>',
		          '<td>',
		            '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>',
		            '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>',
		          '</td>',
		        '</tr>'].join(''));
		        
		        //单个重传
		        tr.find('.demo-reload').on('click', function(){
		          obj.upload(index, file);
		        });
		        
		        //删除
		        tr.find('.demo-delete').on('click', function(){
		          delete files[index]; //删除对应的文件
		          tr.remove();
		          uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
		        });
		        
		        demoListView.append(tr);
		      });
		   },
		    done: function(res, index, upload){
		      if(res.code == 0){ //上传成功
		        var tr = demoListView.find('tr#upload-'+ index),
		        tds = tr.children();
		        tds.eq(2).html('<span style="color: #5FB878;">上传成功</span>');
		        tds.eq(3).html(''); //清空操作
		        return delete this.files[index]; //删除文件队列已经上传成功的文件
		      }
		      this.error(index, upload);
		    }
		    ,error: function(index, upload){
		      var tr = demoListView.find('tr#upload-'+ index),
		      tds = tr.children();
		      tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
		      tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
		    }
	  	})
    });
    
    
</script>
</html>
